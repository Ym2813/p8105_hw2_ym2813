---
title: "p8105_hw2_ym2813"
author: "Anna Ma"
date: "10/4/2021"
output: github_document
---

```{r}
library(tidyverse)
library(readxl)
```

## Problem 1

Read and clean the Mr.Trash Wheel sheet

```{r}
trash_wheel_df = 
  read_excel("data_hw2/Trash-Wheel-Collection-Totals-7-2021-sept.xlsx", 
             sheet = 1, col_names = TRUE, range = "A2:N574") %>% 
  janitor::clean_names() %>%  #clean the variable names
  drop_na(dumpster) %>% #omitting rows without dumpster-specific data
  rename(weight = weight_tons,volume = volume_cubic_yards) %>% #reasonable variable name 
  mutate(sports_balls = round(sports_balls,0)) #round sports_ball to integer
```

Read and clean precipitation data for 2018 

```{r}
precipitation_2018_df = 
  read_excel("data_hw2/Trash-Wheel-Collection-Totals-7-2021-sept.xlsx", 
             sheet = 8, range = "A2:B15") %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(year = "2018") %>% 
  select(year,month,total)
```

Read and clean precipitation data for 2019

```{r}
precipitation_2019_df = 
  read_excel("data_hw2/Trash-Wheel-Collection-Totals-7-2021-sept.xlsx", 
             sheet = 7, range = "A2:B15") %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(year = "2019") %>% 
  select(year,month,total)
```

Combine precipitation datasets and convert month to a character variable

```{r}
precipitation_both_df = 
  bind_rows(precipitation_2018_df, precipitation_2019_df) %>% 
  mutate(month = month.name[month])
```

In the Mr. Trash Wheel data set, we have a total of `r nrow(trash_wheel_df)` observations, each representing a dumpster. The data set collects key information about Mr. Trash Wheel such as specific dumpster number, date, amount of trash they collected in weight and volume, types of trash they collected such as bottles, polystyrene, cigarette butts, and bags, and the homes they powered. The median number of sports balls in a dumpster in 2019 is `r trash_wheel_df %>% filter(year == 2019) %>% pull(sports_balls) %>% median()`. 

In the data set for precipitation in 2018, we have a total of `r nrow(precipitation_2018_df)`observations, which lists out the month with precipitation and the total amount of precipitation within that month. 
Similarly, we have a total of `r nrow(precipitation_2019_df)` observations in the 2019 precipitation data set, listing the month and the total amount of  precipitation. In the combined data set for precipitation in both 2018 and 2019, we have `r nrow(precipitation_both_df)` observations, which lists out all the month with precipitations in both 2018 and 2019; and also the total amount of precipitation in each month and year. The total precipitation in 2018 is `r precipitation_both_df %>% filter(year == 2018) %>% pull(total) %>% sum()`

## Problem 2

Read and clean the data in pols_month

```{r}
pols_month_df = 
  read_csv("data_hw2/fivethirtyeight_datasets/pols-month.csv") %>% 
  separate("mon",c("year","month","day"),sep = "-") %>% 
  mutate(
    month = month.name[as.numeric(month)],
    president = case_when(prez_gop >= 1 ~ "gop",
                          prez_dem == 1 ~ "dem")
    ) %>% 
  select(-c(day,prez_dem,prez_gop))
```

